{"version":3,"sources":["index.js"],"names":["dom","container","document","querySelector","WindowManager","windows","draggingWindow","dragOffset","left","top","handleMouseDown","bind","handleMouseMove","handleMouseUp","handleClick","addEventListener","removeEventListener","options","chipWindow","ChipWindow","id","mount","windowId","unmount","element","root","closest","dataset","event","target","matches","getWindowForDom","destroyWindow","rect","getBoundingClientRect","clientX","clientY","setPosition","title","width","height","_nextId","createElement","classList","add","titleBar","appendChild","titleText","textContent","closeButton","setSize","removeChild","style","windowManager","attach","createWindow"],"mappings":"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","file":"src.f3ab3ddc.js","sourceRoot":"..\\src","sourcesContent":["const dom = {\r\n  container: document.querySelector('#container'),\r\n};\r\n\r\nclass WindowManager {\r\n  constructor() {\r\n    this.windows = {};\r\n    \r\n    this.draggingWindow = null;\r\n    this.dragOffset = {\r\n      left: 0,\r\n      top: 0,\r\n    };\r\n\r\n    // ugh\r\n    this.handleMouseDown = this.handleMouseDown.bind(this);\r\n    this.handleMouseMove = this.handleMouseMove.bind(this);\r\n    this.handleMouseUp = this.handleMouseUp.bind(this);\r\n    this.handleClick = this.handleClick.bind(this);\r\n  }\r\n\r\n  attach() {\r\n    dom.container.addEventListener('mousedown', this.handleMouseDown);\r\n    dom.container.addEventListener('mousemove', this.handleMouseMove);\r\n    dom.container.addEventListener('mouseup', this.handleMouseUp);\r\n    dom.container.addEventListener('click', this.handleClick);\r\n  }\r\n\r\n  detach() {\r\n    dom.container.removeEventListener('mousedown', this.handleMouseDown);\r\n    dom.container.removeEventListener('mousemove', this.handleMouseMove);\r\n    dom.container.removeEventListener('mouseup', this.handleMouseUp);\r\n    dom.container.removeEventListener('click', this.handleClick);\r\n  }\r\n\r\n  createWindow(options) {\r\n    const chipWindow = new ChipWindow(options);\r\n    this.windows[chipWindow.id] = chipWindow;\r\n    chipWindow.mount();\r\n    return chipWindow;\r\n  }\r\n\r\n  destroyWindow(windowId) {\r\n    const chipWindow = this.windows[windowId];\r\n    chipWindow.unmount();\r\n    delete this.windows[windowId];\r\n  }\r\n\r\n  getWindowForDom(element) {\r\n    const root = element.closest('.chip-window');\r\n    return this.windows[root.dataset.windowId];\r\n  }\r\n\r\n  handleClick(event) {\r\n    if (event.target.matches('.chip-window .close-window-button')) {\r\n      const chipWindow = this.getWindowForDom(event.target);\r\n      this.destroyWindow(chipWindow.id);\r\n    }\r\n  }\r\n\r\n  handleMouseDown(event) {\r\n    if (event.target.matches('.chip-window .title-bar :not(button)')) {\r\n      this.draggingWindow = this.getWindowForDom(event.target);\r\n      const rect = event.target.getBoundingClientRect();\r\n      this.dragOffset.left = event.clientX - rect.left;\r\n      this.dragOffset.top = event.clientY - rect.top;\r\n      return;\r\n    }\r\n  }\r\n\r\n  handleMouseMove(event) {\r\n    if (this.draggingWindow) {\r\n      this.draggingWindow.setPosition(\r\n        event.clientX - this.dragOffset.left, \r\n        event.clientY - this.dragOffset.top,\r\n      );\r\n    }\r\n  }\r\n\r\n  handleMouseUp() {\r\n    this.draggingWindow = null;\r\n  }\r\n}\r\n\r\nclass ChipWindow {\r\n  constructor({\r\n    title,\r\n    width, \r\n    height, \r\n    left, \r\n    top,\r\n  }) {\r\n    this.id = ChipWindow._nextId++;\r\n\r\n    this.root = document.createElement('div');\r\n    this.root.classList.add('chip-window');\r\n    this.root.dataset.windowId = this.id;\r\n\r\n    this.titleBar = document.createElement('div');\r\n    this.titleBar.classList.add('title-bar');\r\n    this.root.appendChild(this.titleBar);\r\n\r\n    this.titleText = document.createElement('div');\r\n    this.titleText.classList.add('title-text');\r\n    this.titleText.textContent = title;\r\n    this.titleBar.appendChild(this.titleText);\r\n\r\n    this.closeButton = document.createElement('button');\r\n    this.closeButton.classList.add('close-window-button');\r\n    this.closeButton.textContent = 'X';\r\n    this.titleBar.appendChild(this.closeButton);\r\n\r\n    this.setSize(width, height);\r\n    this.setPosition(left, top);\r\n  }\r\n\r\n  mount() {\r\n   dom.container.appendChild(this.root); \r\n  }\r\n\r\n  unmount() {\r\n    dom.container.removeChild(this.root);\r\n  }\r\n\r\n  setPosition(left, top) {\r\n    this.root.style.left = `${left}px`;\r\n    this.root.style.top = `${top}px`;\r\n  }\r\n\r\n  setSize(width, height) {\r\n    this.root.style.width = `${width}px`;\r\n    this.root.style.height = `${height}px`;\r\n  }\r\n}\r\nChipWindow._nextId = 0;\r\n\r\nconst windowManager = new WindowManager(300, 200, 100, 100);\r\nwindowManager.attach();\r\nwindowManager.createWindow({\r\n  title: 'Test Window',\r\n  width: 300, \r\n  height: 200, \r\n  left: 100, \r\n  top: 100,\r\n});\r\nwindowManager.createWindow({\r\n  title: 'Test Window 2',\r\n  width: 200, \r\n  height: 100, \r\n  left: 500, \r\n  top: 200,\r\n});"]}